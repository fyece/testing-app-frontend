<template>
  <aside
    v-if="showSidebar"
    class="flex-shrink-0 overflow-y-auto w-60 bg-white p-8 border-r border-gray-200"
  >
    <div class="mb-8">
      <svg
        width="60"
        height="32"
        viewBox="0 0 60 32"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path d="M60 0V32H0L60 0Z" fill="#4434FF" />
        <path
          d="M30.176 29.16C28.3733 29.16 27.472 28.28 27.472 26.52V22.28H26.4V20.632H27.472V18.824H29.776V20.632H31.536V22.28H29.776V26.312C29.776 26.9733 30.0853 27.304 30.704 27.304C31.0453 27.304 31.3387 27.2507 31.584 27.144V28.936C31.1573 29.0853 30.688 29.16 30.176 29.16ZM37.1948 29.176C35.8934 29.176 34.8534 28.7973 34.0748 28.04C33.2428 27.272 32.8268 26.232 32.8268 24.92V24.792C32.8268 23.4907 33.2428 22.4347 34.0748 21.624C34.8854 20.8347 35.9041 20.44 37.1308 20.44C38.2934 20.44 39.2428 20.776 39.9788 21.448C40.8001 22.1947 41.2108 23.2773 41.2108 24.696V25.336H35.1788C35.2108 26.04 35.4028 26.584 35.7548 26.968C36.1174 27.3413 36.6188 27.528 37.2588 27.528C38.2614 27.528 38.8428 27.1387 39.0028 26.36H41.1948C41.0561 27.2667 40.6401 27.9653 39.9468 28.456C39.2641 28.936 38.3468 29.176 37.1948 29.176ZM38.9548 23.912C38.8801 22.664 38.2721 22.04 37.1308 22.04C36.6081 22.04 36.1761 22.2053 35.8348 22.536C35.5041 22.856 35.2961 23.3147 35.2108 23.912H38.9548ZM46.035 29.176C44.9043 29.176 44.0243 28.936 43.395 28.456C42.7657 27.976 42.4297 27.2827 42.387 26.376H44.547C44.611 26.7813 44.7497 27.08 44.963 27.272C45.1763 27.464 45.5283 27.56 46.019 27.56C46.8937 27.56 47.331 27.256 47.331 26.648C47.331 26.36 47.203 26.1467 46.947 26.008C46.691 25.8587 46.2537 25.7413 45.635 25.656C44.5043 25.4747 43.715 25.2027 43.267 24.84C42.787 24.4667 42.547 23.8693 42.547 23.048C42.547 22.2267 42.8883 21.5707 43.571 21.08C44.1577 20.6533 44.9203 20.44 45.859 20.44C46.8297 20.44 47.6137 20.632 48.211 21.016C48.8403 21.4427 49.2083 22.1147 49.315 23.032H47.187C47.123 22.68 46.9897 22.424 46.787 22.264C46.5843 22.104 46.2803 22.024 45.875 22.024C45.5017 22.024 45.2083 22.104 44.995 22.264C44.7923 22.424 44.691 22.632 44.691 22.888C44.691 23.1547 44.803 23.352 45.027 23.48C45.2617 23.608 45.6883 23.7147 46.307 23.8C47.4057 23.9493 48.211 24.2 48.723 24.552C49.2777 24.968 49.555 25.592 49.555 26.424C49.555 27.32 49.2457 28.0027 48.627 28.472C48.019 28.9413 47.155 29.176 46.035 29.176ZM54.2698 29.16C52.4671 29.16 51.5658 28.28 51.5658 26.52V22.28H50.4938V20.632H51.5658V18.824H53.8698V20.632H55.6298V22.28H53.8698V26.312C53.8698 26.9733 54.1791 27.304 54.7977 27.304C55.1391 27.304 55.4324 27.2507 55.6778 27.144V28.936C55.2511 29.0853 54.7818 29.16 54.2698 29.16Z"
          fill="white"
        />
      </svg>
    </div>
    <nav>
      <ul class="text-lg space-y-2 font-semibold text-gray-500">
        <li v-for="route in navRoutes" :key="route.path">
          <RouterLink :to="route.path" class="text-md font-semibold" activeClass="text-gray-800">{{
            route.name
          }}</RouterLink>
        </li>
      </ul>
    </nav>
  </aside>
</template>

<script setup lang="ts">
import { useAuthStore } from '@/stores/auth'
import { computed } from 'vue'
import { useRoute } from 'vue-router'

const ADMIN_ROUTES = [
  {
    name: 'Статистика',
    path: '/stats'
  },
  {
    name: 'Тесты',
    path: '/tests'
  },
  {
    name: 'Сотрудники',
    path: '/users'
  },
  {
    name: 'Группы',
    path: '/groups'
  },
  {
    name: 'Выход',
    path: '/login'
  }
]

const USER_ROUTES = [
  {
    name: 'Тесты',
    path: '/tests'
  },
  {
    name: 'Статистика',
    path: '/stats'
  },
  {
    name: 'Выход',
    path: '/login'
  }
]

const authStore = useAuthStore()
const userRole = computed(() => localStorage.getItem('role'))
const navRoutes = computed(() => (userRole.value === 'ADMIN' ? ADMIN_ROUTES : USER_ROUTES))

const route = useRoute()
const showSidebar = computed(() => {
  return !route.meta.hideSidebar
})
</script>

<style scoped></style>
